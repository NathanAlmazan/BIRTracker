{"version":3,"file":"static/js/273.950fc144.chunk.js","mappings":"+TAoBe,SAASA,EAAUC,GAChC,IAAQC,GAAUC,EAAAA,EAAAA,MAAVD,MACAE,GAAQC,EAAAA,EAAAA,IAAe,SAACC,GAAK,OAAKA,EAAMC,IAAI,IAA5CH,IACRI,GAAmCC,EAAAA,EAAAA,GAAsCC,EAAAA,GAAiB,CACxFC,UAAW,CACTC,OAAQR,EACRS,KAAMZ,EAAMY,MAEdC,YAAa,iBALDC,EAAOP,EAAbQ,KAAeC,EAAOT,EAAPS,QAOTC,GAAgBC,EAAAA,EAAAA,GAAsDC,EAAAA,GAAwB,CAC1GT,UAAW,CACTU,SAAUjB,KAFNY,KAKRM,EAAgCC,EAAAA,SAA8BrB,GAAgB,MAAKsB,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA5EI,EAAQF,EAAA,GAAEG,EAAWH,EAAA,GAC5BI,EAA8BL,EAAAA,UAAwB,GAAMM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAArDE,EAAOD,EAAA,GAAEE,EAAUF,EAAA,GAE1BN,EAAAA,WAAgB,WACVL,GAAaD,EAAQ,CAAEL,OAAQM,EAAYA,YAAYc,aAAcnB,KAAMZ,EAAMY,MACvF,GAAG,CAACK,EAAaD,EAAShB,EAAMY,OAEhC,IAAMoB,EAAsB,WAAH,OAASF,GAAYD,EAAS,EAUjDI,EAAoB,WACxBjB,EAAQ,CAAEL,OAAQR,EAAKS,KAAMZ,EAAMY,MACrC,EAEA,OACEsB,EAAAA,EAAAA,MAACC,EAAAA,GAAI,CAACC,WAAS,EAACC,QAAS,EAAGC,WAAW,UAAUC,GAAI,CAAEC,OAAQ,OAAQC,SAAA,EACrEC,EAAAA,EAAAA,KAACP,EAAAA,GAAI,CAACQ,MAAI,EAACC,GAAI,EAAEH,UACfC,EAAAA,EAAAA,KAACG,EAAAA,EAAS,CACRC,MAAc,OAAPhC,QAAO,IAAPA,OAAO,EAAPA,EAASiC,cAChBlB,QAASA,EACTmB,WAAYvB,EACZwB,KAAK,OACLC,UAAWjB,EACXkB,gBAAiBnB,EACjBoB,cAtBkB,SAACC,GAAU,OAAK3B,EAAY2B,EAAI,OAyBtDX,EAAAA,EAAAA,KAACP,EAAAA,GAAI,CAACQ,MAAI,EAACC,GAAI,EAAGL,GAAI,CAAEe,SAAU,YAAab,SAC5CZ,GACCa,EAAAA,EAAAA,KAACa,EAAAA,EAAY,CACX5C,OAAQR,EACRqD,gBAAiBxB,EACjByB,eA5BiB,SAACJ,GAC1B3B,EAAY2B,GACZvB,GAAW,GACXG,GACF,IA0BUR,GACFiB,EAAAA,EAAAA,KAACgB,EAAAA,EAAU,CACT/C,OAAQR,EACRsB,SAAUA,EACVkC,SAAU1B,KAGZC,EAAAA,EAAAA,MAAC0B,EAAAA,EAAG,CAACrB,GAAI,CAAEsB,QAAS,OAAQrB,OAAQ,OAAQsB,eAAgB,SAAUxB,WAAY,SAAUyB,cAAe,UAAWtB,SAAA,EACpHC,EAAAA,EAAAA,KAACsB,EAAAA,EAAgB,CAACC,MAAM,YAAY1B,GAAI,CAAE2B,SAAU,GAAIC,GAAI,MAC5DzB,EAAAA,EAAAA,KAAC0B,EAAAA,EAAU,CAACC,QAAQ,YAAW5B,SAAC,4BAGhCC,EAAAA,EAAAA,KAAC0B,EAAAA,EAAU,CAACC,QAAQ,QAAO5B,SAAC,4BAQxC,C","sources":["pages/threads/Sent.tsx"],"sourcesContent":["import React from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n// mui\r\nimport Grid from '@mui/material/Grid';\r\nimport Box from '@mui/material/Box';\r\nimport Typography from '@mui/material/Typography';\r\n//icons\r\nimport MarkAsUnreadIcon from '@mui/icons-material/MarkAsUnread';\r\n// project imports\r\nimport EmailList from './EmailList';\r\nimport ThreadList from './ThreadList';\r\nimport CreateThread from './CreateThread';\r\nimport { InboxType } from './Inbox';\r\nimport { useAppSelector } from '../../redux/hooks';\r\n// api\r\nimport { AUTHOR_INBOX_SUBSCRIBE, GET_SENT_THREAD } from '../../api/threads';\r\nimport { SubscriptionMessage, Thread } from '../../api/threads/types';\r\nimport { useQuery, useSubscription } from '@apollo/client';\r\n\r\n\r\nexport default function EmailPage(props: { type: InboxType }) {\r\n  const { refId } = useParams();\r\n  const { uid } = useAppSelector((state) => state.auth);\r\n  const { data: threads, refetch } = useQuery<{ getSentThread: Thread[] }>(GET_SENT_THREAD, {\r\n    variables: {\r\n      userId: uid,\r\n      type: props.type\r\n    },\r\n    fetchPolicy: 'network-only'\r\n  });\r\n  const { data: authorInbox } = useSubscription<{ authorInbox: SubscriptionMessage }>(AUTHOR_INBOX_SUBSCRIBE, {\r\n    variables: {\r\n      authorId: uid\r\n    }\r\n  })\r\n  const [threadId, setThreadId] = React.useState<string | null>(refId ? refId : null);\r\n  const [compose, setCompose] = React.useState<boolean>(false);\r\n\r\n  React.useEffect(() => {\r\n    if (authorInbox) refetch({ userId: authorInbox.authorInbox.referenceNum, type: props.type });\r\n  }, [authorInbox, refetch, props.type]);\r\n\r\n  const handleComposeThread = () => setCompose(!compose);\r\n\r\n  const handleThreadClick = (id: string) => setThreadId(id);\r\n\r\n  const handleCreateThread = (id: string) => {\r\n    setThreadId(id);\r\n    setCompose(false);\r\n    handleRefreshList();\r\n  }\r\n\r\n  const handleRefreshList = () => {\r\n    refetch({ userId: uid, type: props.type });\r\n  }\r\n\r\n  return (\r\n    <Grid container spacing={3} alignItems=\"stretch\" sx={{ height: \"95%\" }}>\r\n      <Grid item md={4}>\r\n        <EmailList \r\n          mails={threads?.getSentThread}\r\n          compose={compose}\r\n          selectedId={threadId}\r\n          mode=\"sent\"\r\n          onRefresh={handleRefreshList}\r\n          onComposeThread={handleComposeThread}\r\n          onThreadClick={handleThreadClick}\r\n        />\r\n      </Grid>\r\n      <Grid item md={8} sx={{ position: 'relative' }}>\r\n        {compose ? (\r\n          <CreateThread \r\n            userId={uid as string}\r\n            onDiscardThread={handleComposeThread}\r\n            onCreateThread={handleCreateThread}\r\n          />\r\n        ) : threadId ? (\r\n          <ThreadList \r\n            userId={uid as string}\r\n            threadId={threadId}\r\n            onUpdate={handleRefreshList}\r\n          />\r\n        ) : (\r\n          <Box sx={{ display: 'flex', height: '100%', justifyContent: 'center', alignItems: 'center', flexDirection: 'column' }}>\r\n            <MarkAsUnreadIcon color='secondary' sx={{ fontSize: 64, mb: 1 }} />\r\n            <Typography variant=\"subtitle1\">\r\n                Select an item to read\r\n            </Typography>\r\n            <Typography variant=\"body1\">\r\n                No item selected\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n      </Grid>\r\n    </Grid>\r\n  )\r\n}"],"names":["EmailPage","props","refId","useParams","uid","useAppSelector","state","auth","_useQuery","useQuery","GET_SENT_THREAD","variables","userId","type","fetchPolicy","threads","data","refetch","authorInbox","useSubscription","AUTHOR_INBOX_SUBSCRIBE","authorId","_React$useState","React","_React$useState2","_slicedToArray","threadId","setThreadId","_React$useState3","_React$useState4","compose","setCompose","referenceNum","handleComposeThread","handleRefreshList","_jsxs","Grid","container","spacing","alignItems","sx","height","children","_jsx","item","md","EmailList","mails","getSentThread","selectedId","mode","onRefresh","onComposeThread","onThreadClick","id","position","CreateThread","onDiscardThread","onCreateThread","ThreadList","onUpdate","Box","display","justifyContent","flexDirection","MarkAsUnreadIcon","color","fontSize","mb","Typography","variant"],"sourceRoot":""}