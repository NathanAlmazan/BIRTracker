"use strict";(self.webpackChunkbiranila=self.webpackChunkbiranila||[]).push([[816],{91816:function(e,t,a){a.r(t),a.d(t,{chartColors:function(){return oe},default:function(){return ne}});var r=a(72791),n=a(61889),o=a(29439),i=a(57621),s=a(9585),l=a(36314),c=a(39504),d=a(64554),u=a(20890),h=a(13967),p=a(97892),f=a.n(p),g=a(24750),x=a(71652),m=a(8399),y=a(13496),v=a(96578),j=a(29416),Z=a(33081),b=a(22872),S=a(80184);function D(e){var t=e.officeId,a=(0,h.Z)(),n=(0,b.C)((function(e){return e.auth})).role,p=r.useState(function(){var e=new Date;return e.setDate(e.getDate()-30),e}().toISOString()),D=(0,o.Z)(p,2),I=D[0],w=D[1],C=r.useState((new Date).toISOString()),k=(0,o.Z)(C,2),T=k[0],A=k[1],F=(0,v.a)(j.Db,{variables:{officeId:t,startDate:I,endDate:T,superuser:n?n.superuser:null},fetchPolicy:"network-only"}),O=F.data,P=F.refetch,M=(0,v.a)(Z.Eg).data,N=(0,v.a)(Z.Ph).data,Y=r.useState(),E=(0,o.Z)(Y,2),z=E[0],L=E[1],W=r.useState([]),R=(0,o.Z)(W,2),B=R[0],H=R[1];r.useEffect((function(){if(O&&M&&N){var e=a.palette.text.primary,t=a.palette.grey[200],r=a.palette.grey[500];L({chart:{id:"bar-chart",stacked:!0,toolbar:{show:!1},zoom:{enabled:!0}},colors:oe,responsive:[{breakpoint:500,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],xaxis:{type:"category",categories:M.getAllThreadTypes.map((function(e){return e.docType})),labels:{style:{colors:[e,e,e,e,e,e,e,e,e,e,e,e],fontSize:"8px"}}},yaxis:{labels:{style:{colors:[e]}}},grid:{borderColor:t,show:!0},tooltip:{theme:"light"},plotOptions:{bar:{horizontal:!1,columnWidth:"50%"}},legend:{show:!0,position:"top",fontSize:"14px",fontFamily:"'Roboto', sans-serif",offsetX:20,labels:{useSeriesColors:!1,colors:r},markers:{width:16,height:16,radius:5},itemMargin:{horizontal:15,vertical:8}},fill:{type:"solid"},dataLabels:{enabled:!1}}),H(N.getAllThreadStatus.map((function(e){return{name:e.statusLabel,data:M.getAllThreadTypes.map((function(t){var a=O.getThreadTypeAnalytics.filter((function(a){return a.status.statusId===e.statusId&&a.docType.docId===t.docId}));return a.length>0?a.reduce((function(e,t){return e+t.count}),0):0}))}})))}}),[O,M,N,a]);return(0,S.jsxs)(i.Z,{children:[(0,S.jsx)(s.Z,{title:(0,S.jsx)(d.Z,{children:(0,S.jsx)(u.Z,{variant:"h6",children:"Document Types Tracker"})}),action:(0,S.jsx)(x._,{dateAdapter:g.y,children:(0,S.jsxs)(l.Z,{direction:"row",spacing:1,children:[(0,S.jsx)(m.M,{label:"Report Start Date",views:["year","month","day"],value:f()(I),onChange:function(e){e&&(w(e.toISOString()),P({officeId:t,startDate:e.toISOString(),endDate:T}))},format:"MMMM DD, YYYY"}),(0,S.jsx)(m.M,{label:"Report End Date",views:["year","month","day"],value:f()(T),onChange:function(e){e&&(A(e.toISOString()),P({officeId:t,startDate:I,endDate:e.toISOString()}))},format:"MMMM DD, YYYY"})]})})}),(0,S.jsx)(c.Z,{children:z&&(0,S.jsx)(y.Z,{type:"bar",height:500,options:z,series:B})})]})}function I(e){var t=e.officeId,a=(0,h.Z)(),n=(0,b.C)((function(e){return e.auth})).role,p=r.useState(function(){var e=new Date;return e.setDate(e.getDate()-30),e}().toISOString()),D=(0,o.Z)(p,2),I=D[0],w=D[1],C=r.useState((new Date).toISOString()),k=(0,o.Z)(C,2),T=k[0],A=k[1],F=(0,v.a)(j.QI,{variables:{officeId:t,startDate:I,endDate:T,superuser:n?n.superuser:null},fetchPolicy:"network-only"}),O=F.data,P=F.refetch,M=(0,v.a)(Z.Do).data,N=(0,v.a)(Z.Ph).data,Y=r.useState(),E=(0,o.Z)(Y,2),z=E[0],L=E[1],W=r.useState([]),R=(0,o.Z)(W,2),B=R[0],H=R[1];r.useEffect((function(){if(O&&M&&N){var e=a.palette.text.primary,t=a.palette.grey[200],r=a.palette.grey[500];L({chart:{id:"bar-chart",stacked:!0,toolbar:{show:!1},zoom:{enabled:!0}},colors:oe,responsive:[{breakpoint:500,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],xaxis:{type:"category",categories:M.getAllThreadPurpose.map((function(e){return e.purposeName})),labels:{style:{colors:[e,e,e,e,e,e,e,e,e,e,e,e],fontSize:"8px"}}},yaxis:{labels:{style:{colors:[e]}}},grid:{borderColor:t,show:!0},tooltip:{theme:"light"},plotOptions:{bar:{horizontal:!1,columnWidth:"50%"}},legend:{show:!0,position:"top",fontSize:"14px",fontFamily:"'Roboto', sans-serif",offsetX:20,labels:{useSeriesColors:!1,colors:r},markers:{width:16,height:16,radius:5},itemMargin:{horizontal:15,vertical:8}},fill:{type:"solid"},dataLabels:{enabled:!1}}),H(N.getAllThreadStatus.map((function(e){return{name:e.statusLabel,data:M.getAllThreadPurpose.map((function(t){var a=O.getThreadPurposeAnalytics.filter((function(a){return a.status.statusId===e.statusId&&a.purpose.purposeId===t.purposeId}));return a.length>0?a.reduce((function(e,t){return e+t.count}),0):0}))}})))}}),[O,M,N,a]);return(0,S.jsxs)(i.Z,{children:[(0,S.jsx)(s.Z,{title:(0,S.jsx)(d.Z,{children:(0,S.jsx)(u.Z,{variant:"h6",children:"Document Purpose Tracker"})}),action:(0,S.jsx)(x._,{dateAdapter:g.y,children:(0,S.jsxs)(l.Z,{direction:"row",spacing:1,children:[(0,S.jsx)(m.M,{label:"Report Start Date",views:["year","month","day"],value:f()(I),onChange:function(e){e&&(w(e.toISOString()),P({officeId:t,startDate:e.toISOString(),endDate:T}))},format:"MMMM DD, YYYY"}),(0,S.jsx)(m.M,{label:"Report End Date",views:["year","month","day"],value:f()(T),onChange:function(e){e&&(A(e.toISOString()),P({officeId:t,startDate:I,endDate:e.toISOString()}))},format:"MMMM DD, YYYY"})]})})}),(0,S.jsx)(c.Z,{children:z&&(0,S.jsx)(y.Z,{type:"bar",height:500,options:z,series:B})})]})}var w=a(57689),C=a(79286),k=a.n(C),T=a(66934),A=a(12065),F=a(72363),O=a(36151),P=(0,T.ZP)("div")((function(e){var t=e.theme;return{height:350,marginTop:t.spacing(5),"& .apexcharts-canvas svg":{height:350},"& .apexcharts-canvas svg,.apexcharts-canvas foreignObject":{overflow:"visible"},"& .apexcharts-legend":{height:72,alignContent:"center",position:"relative !important",borderTop:"solid 1px ".concat(t.palette.divider),top:"calc(".concat(278,"px) !important")}}}));function M(e){var t=e.officeId,a=e.completed,n=(0,h.Z)(),l=(0,w.s0)(),d=(0,b.C)((function(e){return e.auth})).role,p=(0,v.a)(Z.Eg).data,f=(0,v.a)(j.EN,{variables:{officeId:t,completed:a,superuser:d?d.superuser:null},fetchPolicy:"network-only"}).data,g=r.useState([]),x=(0,o.Z)(g,2),m=x[0],D=x[1],I=function(e){var t=(0,h.Z)(),a={show:!0,label:"Total",color:t.palette.text.secondary,fontSize:t.typography.subtitle2.fontSize,fontWeight:t.typography.subtitle2.fontWeight,lineHeight:t.typography.subtitle2.lineHeight},r={offsetY:8,color:t.palette.text.primary,fontSize:t.typography.h3.fontSize,fontWeight:t.typography.h3.fontWeight,lineHeight:t.typography.h3.lineHeight},n={colors:[t.palette.primary.main,t.palette.warning.main,t.palette.info.main,t.palette.error.main,t.palette.success.main,t.palette.warning.dark,t.palette.success.main,t.palette.info.dark,t.palette.info.light],chart:{toolbar:{show:!1},zoom:{enabled:!1},foreColor:t.palette.text.disabled,fontFamily:t.typography.fontFamily},states:{hover:{filter:{type:"lighten",value:.04}},active:{filter:{type:"darken",value:.88}}},fill:{opacity:1,gradient:{type:"vertical",shadeIntensity:0,opacityFrom:.4,opacityTo:0,stops:[0,100]}},dataLabels:{enabled:!1},stroke:{width:3,curve:"smooth",lineCap:"round"},grid:{strokeDashArray:3,borderColor:t.palette.divider,xaxis:{lines:{show:!1}}},xaxis:{axisBorder:{show:!1},axisTicks:{show:!1}},markers:{size:0,strokeColors:t.palette.background.paper},tooltip:{x:{show:!1}},legend:{show:!1},plotOptions:{bar:{borderRadius:4,columnWidth:"28%",borderRadiusApplication:"end",borderRadiusWhenStacked:"last"},pie:{donut:{labels:{show:!0,value:r,total:a}}},radialBar:{track:{strokeWidth:"100%",background:(0,A.Fq)(t.palette.grey[500],.16)},dataLabels:{value:r,total:a}},radar:{polygons:{fill:{colors:["transparent"]},strokeColors:t.palette.divider,connectorColors:t.palette.divider}},polarArea:{rings:{strokeColor:t.palette.divider},spokes:{connectorColors:t.palette.divider}}},responsive:[{breakpoint:t.breakpoints.values.sm,options:{plotOptions:{bar:{columnWidth:"40%"}}}},{breakpoint:t.breakpoints.values.md,options:{plotOptions:{bar:{columnWidth:"32%"}}}}]};return k()(n,e)}({colors:oe,labels:p?p.getAllThreadTypes.map((function(e){return e.docType})):[],stroke:{colors:[n.palette.background.paper]},legend:{floating:!0,horizontalAlign:"center"},dataLabels:{enabled:!1,dropShadow:{enabled:!1}},tooltip:{fillSeriesColor:!1,y:{formatter:function(e){return e.toFixed(2)},title:{formatter:function(e){return"".concat(e)}}}}});r.useEffect((function(){f&&p&&D(p.getAllThreadTypes.map((function(e){var t=f.getStatusAnalytics.filter((function(t){return t.docType.docId===e.docId}));return t.length>0?t.reduce((function(e,t){return e+t.count}),0):0})))}),[f,p]);return(0,S.jsxs)(i.Z,{sx:{height:"100%"},children:[(0,S.jsx)(s.Z,{title:(0,S.jsx)(u.Z,{variant:"h6",children:a?"Completed Documents":"Pending Documents"})}),(0,S.jsx)(c.Z,{children:(0,S.jsx)(P,{dir:"ltr",children:(0,S.jsx)(y.Z,{type:"donut",series:m,options:I,height:380})})}),(0,S.jsx)(F.Z,{children:(0,S.jsx)(O.Z,{size:"large",onClick:function(){l(a?"/app/inbox/finished":"/app/inbox/tasks")},fullWidth:!0,children:a?"See Completed Documents":"See Pending Documents"})})]})}var N=a(94721),Y=a(93044),E=a(93385),z=a(77831);function L(e){var t=e.userId,a=(0,w.s0)(),r=(0,v.a)(Z.PK,{variables:{userId:t,type:"pending"},fetchPolicy:"network-only"}).data;return(0,S.jsxs)(i.Z,{children:[(0,S.jsx)(s.Z,{title:"To-Do-List"}),(0,S.jsxs)(d.Z,{sx:{maxHeight:500,overflowY:"auto"},children:[0===(null===r||void 0===r?void 0:r.getThreadInbox.length)&&(0,S.jsxs)(d.Z,{sx:{display:"flex",height:280,justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,S.jsx)(z.Z,{color:"secondary",sx:{fontSize:64,mb:1}}),(0,S.jsx)(u.Z,{variant:"subtitle1",children:"Job Well Done!"}),(0,S.jsx)(u.Z,{variant:"body1",children:"You have no recurring tasks"})]}),(0,S.jsx)(l.Z,{spacing:3,sx:{p:3,pr:0},children:null===r||void 0===r?void 0:r.getThreadInbox.map((function(e){return(0,S.jsx)(R,{task:e},e.refId)}))})]}),(0,S.jsx)(N.Z,{}),(0,S.jsx)(d.Z,{sx:{p:2,textAlign:"right"},children:(0,S.jsx)(O.Z,{size:"small",color:"inherit",endIcon:(0,S.jsx)(E.Z,{}),onClick:function(){return a("/app/inbox")},children:"View all"})})]})}var W=function(e){return new Date(e).toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric"})};function R(e){var t=e.task,a=t.subject,r=t.author,n=t.docType,o=t.dateUpdated;return(0,S.jsxs)(l.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,S.jsx)(Y.Z,{sx:{width:48,height:48},children:"".concat(r.firstName.charAt(0)).concat(r.lastName.charAt(0))}),(0,S.jsxs)(d.Z,{sx:{minWidth:240,flexGrow:1},children:[(0,S.jsx)(u.Z,{color:"inherit",variant:"subtitle2",noWrap:!0,children:a}),(0,S.jsx)(u.Z,{variant:"body2",sx:{color:"text.secondary"},noWrap:!0,children:"".concat(r.firstName," ").concat(r.lastName," \u2014 ").concat(n.docType)})]}),(0,S.jsx)(u.Z,{variant:"caption",sx:{pr:3,flexShrink:0,color:"text.secondary"},children:"Updated at ".concat(W(o))})]})}var B=a(93433),H=a(27391),J=a(23786),X=a(39281),q=a(79836),U=a(56890),V=a(53382),_=a(35855),G=a(53994),K=a(63033),Q=a(81918),$=a(98472),ee=a(3505);function te(){var e=(new Date).getFullYear();return[e-3,e-2,e-1,e]}var ae=function(e){return new Date(e).toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric"})};function re(){var e=(0,b.C)((function(e){return e.auth})).uid,t=(0,v.a)(j.Ic,{variables:{userId:e,dateCreated:new Date((new Date).getFullYear(),(new Date).getMonth(),1).toISOString()},fetchPolicy:"network-only"}),a=t.data,n=t.refetch,d=r.useState((new Date).getMonth()),h=(0,o.Z)(d,2),p=h[0],f=h[1],g=r.useState((new Date).getFullYear()),x=(0,o.Z)(g,2),m=x[0],y=x[1],Z=r.useState(0),D=(0,o.Z)(Z,2),I=D[0],w=D[1],C=r.useState(5),k=(0,o.Z)(C,2),T=k[0],A=k[1],F=r.useState(0),P=(0,o.Z)(F,2),M=P[0],N=P[1];r.useEffect((function(){a&&N(I>0?Math.max(0,(1+I)*T-a.getThreadSummary.length):0)}),[a,I,T]);return(0,S.jsxs)(i.Z,{children:[(0,S.jsx)(s.Z,{title:"Requests Summary",action:(0,S.jsxs)(l.Z,{direction:"row",spacing:2,children:[(0,S.jsx)(H.Z,{name:"report-month",label:"Month",value:p,onChange:function(t){f(parseInt(t.target.value)),n({userId:e,dateCreated:new Date((new Date).getFullYear(),parseInt(t.target.value),1).toISOString()})},select:!0,children:["January","February","March","April","May","June","July","August","September","October","November","December"].map((function(e,t){return(0,S.jsx)(J.Z,{value:t,children:e},e)}))}),(0,S.jsx)(H.Z,{name:"report-year",label:"Year",value:m,onChange:function(t){y(parseInt(t.target.value)),n({userId:e,dateCreated:new Date(parseInt(t.target.value),(new Date).getMonth(),1).toISOString()})},select:!0,children:te().map((function(e){return(0,S.jsx)(J.Z,{value:e,children:e.toString()},e)}))}),a&&(0,S.jsx)($.CSVLink,{filename:"".concat(new Date(m,p,1).toISOString().split("T")[0],".csv"),data:[["Reference #","Received From","Offices Concerned","For","Document Type","Date Received","Date Due","Statuses","Tags"]].concat((0,B.Z)(a.getThreadSummary.map((function(e){return function(e){return[e.refSlipNum,"".concat(e.author.firstName," ").concat(e.author.lastName," (").concat(e.author.officeSection.sectionOffice.officeName,")"),e.recipientList.map((function(e){return"".concat(e.sectionOffice.officeName," ").concat("default"===e.sectionName?"":"(".concat(e.sectionName,")"))})).join(", "),e.purpose.purposeName,e.docType.docType,ae(e.dateCreated),ae(e.dateDue),e.recipientList.map((function(t,a){return"".concat(e.statusList[a].statusLabel," (").concat(t.sectionOffice.refNum,")")})).join(", "),"".concat(e.threadTag?e.threadTag.tagName:"")]}(e)})))),children:(0,S.jsx)(O.Z,{variant:"contained",startIcon:(0,S.jsx)(ee.Z,{}),sx:{minHeight:50},children:"Export"})})]})}),(0,S.jsxs)(c.Z,{children:[(0,S.jsx)(X.Z,{children:(0,S.jsxs)(q.Z,{children:[(0,S.jsx)(U.Z,{children:(0,S.jsxs)(_.Z,{children:[(0,S.jsx)(G.Z,{children:"Reference #"}),(0,S.jsx)(G.Z,{children:"Received From"}),(0,S.jsx)(G.Z,{children:"Offices Concerned"}),(0,S.jsx)(G.Z,{children:"Details"}),(0,S.jsx)(G.Z,{children:"Date Received"}),(0,S.jsx)(G.Z,{children:"Date Due"})]})}),(0,S.jsxs)(V.Z,{children:[a&&a.getThreadSummary.slice(I*T,I*T+T).map((function(e){return(0,S.jsxs)(_.Z,{children:[(0,S.jsxs)(G.Z,{style:{verticalAlign:"top"},children:[(0,S.jsx)(u.Z,{variant:"body1",sx:{fontWeight:800,minWidth:250},children:e.refSlipNum}),e.threadTag&&(0,S.jsx)(Q.Z,{size:"small",label:e.threadTag.tagName,color:(t=e.threadTag.tagName,"Top Priority"===t?"error":"Confidential"===t?"warning":"primary"),sx:{my:1}})]}),(0,S.jsxs)(G.Z,{style:{verticalAlign:"top"},children:[(0,S.jsx)(u.Z,{variant:"body1",children:e.author.firstName+" "+e.author.lastName}),(0,S.jsx)(u.Z,{variant:"subtitle2",children:e.author.role.roleName}),(0,S.jsx)(u.Z,{variant:"caption",children:"".concat(e.author.officeSection.sectionOffice.officeName," ").concat("default"===e.author.officeSection.sectionName?"":e.author.officeSection.sectionName)})]}),(0,S.jsx)(G.Z,{style:{verticalAlign:"top"},children:(0,S.jsx)(l.Z,{spacing:2,children:e.recipientList.map((function(t,a){return(0,S.jsxs)("div",{children:[(0,S.jsx)(u.Z,{variant:"body1",children:t.sectionOffice.officeName}),(0,S.jsx)(Q.Z,{size:"small",label:e.statusList[a].statusLabel,color:(r=e.statusList[a].statusLabel,r.includes("Complied")||r.includes("FYI")?"success":void 0)})]},a);var r}))})}),(0,S.jsxs)(G.Z,{style:{verticalAlign:"top"},children:[(0,S.jsx)(u.Z,{variant:"body1",children:"For ".concat(e.purpose.purposeName.replace("For",""))}),(0,S.jsx)(u.Z,{variant:"caption",children:e.docType.docType})]}),(0,S.jsx)(G.Z,{style:{verticalAlign:"top"},children:ae(e.dateCreated)}),(0,S.jsx)(G.Z,{style:{verticalAlign:"top"},children:ae(e.dateDue)})]},e.refId);var t})),M>0&&(0,S.jsx)(_.Z,{style:{height:80*M},children:(0,S.jsx)(G.Z,{colSpan:6})})]})]})}),(0,S.jsx)(K.Z,{rowsPerPageOptions:[5,10,15],component:"div",count:a?a.getThreadSummary.length:0,page:I,rowsPerPage:T,onPageChange:function(e,t){w(t)},onRowsPerPageChange:function(e){A(parseInt(e.target.value,10)),w(0)}})]})]})}function ne(){var e=(0,b.C)((function(e){return e.auth})),t=e.uid,a=e.office;return(0,S.jsxs)(n.ZP,{container:!0,spacing:2,sx:{maxHeight:"calc(100vh - 80px)",overflowY:"auto",pb:2,px:2},children:[(0,S.jsx)(n.ZP,{item:!0,md:12,lg:8,children:(0,S.jsx)(D,{officeId:null===a||void 0===a?void 0:a.sectionId})}),(0,S.jsx)(n.ZP,{item:!0,md:6,lg:4,children:(0,S.jsx)(M,{officeId:null===a||void 0===a?void 0:a.sectionId,completed:!0})}),(0,S.jsx)(n.ZP,{item:!0,md:12,lg:8,children:(0,S.jsx)(I,{officeId:null===a||void 0===a?void 0:a.sectionId})}),(0,S.jsx)(n.ZP,{item:!0,md:6,lg:4,children:(0,S.jsx)(M,{officeId:null===a||void 0===a?void 0:a.sectionId,completed:!1})}),(0,S.jsx)(n.ZP,{item:!0,md:12,lg:12,children:(0,S.jsx)(re,{})}),(0,S.jsx)(n.ZP,{item:!0,md:12,lg:8,children:(0,S.jsx)(L,{userId:t})})]})}var oe=["#9288F8","#FFD2D7","#461959","#7A316F","#CD6688","#AED8CC","#9A208C","#E11299","#35155D","#512B81","#4477CE","#8CABFF","#6F61C0","#A084E8","#8BE8E5","#D5FFE4","#4682A9","#749BC2","#91C8E4","#F6F4EB","#FFE7A0","#322653","#8062D6","#FFEAEA","#F5C6EC"]}}]);
//# sourceMappingURL=816.a737a7e8.chunk.js.map